---
title: React 19 New Features
date: '2025-01-23'
tags: ['javascript', 'react']
draft: true
summary: React 19 New Features
---

## React19 New Features

### Actions

React에서 상태 업데이트가 필요한 경우. `useState()`를 사용해서 데이터를 변형한 다음에 상태를 업데이트합니다.
예를 들자면 사용자가 이름을 변경하려고하면 데이터를 제출하고, api 요청 처리를 한 다음 응답처리를 합니다.
pending, error 와 같은 상태를 `useState()`로 관리해서 처리를 했습니다.

```javascript
// Before Actions
function UpdateName({}) {
  const [name, setName] = useState('')
  const [error, setError] = useState(null)
  const [isPending, setIsPending] = useState(false)

  const handleSubmit = async () => {
    setIsPending(true)
    const error = await updateName(name)
    setIsPending(false)
    if (error) {
      setError(error)
      return
    }
    redirect('/path')
  }

  return (
    <div>
      <input value={name} onChange={(event) => setName(event.target.value)} />
      <button onClick={handleSubmit} disabled={isPending}>
        Update
      </button>
      {error && <p>{error}</p>}
    </div>
  )
}
```

React 19에서는 `useTransition()`을 사용해서 pending state를 처리할 수 있습니다.

```javascript
// Using pending state from Actions
function UpdateName({}) {
  const [name, setName] = useState('')
  const [error, setError] = useState(null)
  const [isPending, startTransition] = useTransition()

  const handleSubmit = async () => {
    startTransition(async () => {
      const error = await updateName(name)
      if (error) {
        setError(error)
        return
      }
      redirect('/path')
    })
  }

  return (
    <div>
      <input value={name} onChange={(event) => setName(event.target.value)} />
      <button onClick={handleSubmit} disabled={isPending}>
        Update
      </button>
      {error && <p>{error}</p>}
    </div>
  )
}
```

비동기 트랜지션은 isPending 상태를 즉시 true로 설정하고, 비동기 요청를 처리하고 isPending 을 false로 전환합니다. 이렇게 하면 데이터가 변경되는 동안 현재 UI를 반응형 및 대화형으로 유지할 수 있습니다.
Actions를 기반으로 구축된 React19는 optimistic updates를 관리하기 위해서 React.useActionState를 도입했습니다. react-dom에서는 Form을자동으로관리하기위해 <form> Action을추가하고폼에서일반적인경우의 action을지원하기위해 useFormStatus를추가하고있습니다.
React 19에서는 위의 예제를 다음과 같이 단순화할 수 있습니다.

```javascript
// Using <form> Actions and useActionState
function ChangeName({ name, setName }) {
  const [error, submitAction, isPending] = useActionState(async (previousState, formData) => {
    const error = await updateName(formData.get('name'))
    if (error) {
      return error
    }
    redirect('/path')
  })

  return (
    <form action={submitAction}>
      <input type="text" name="name" />
      <button type="submit" disabled={isPending}>
        Update
      </button>
      {error && <p>{error}</p>}
    </form>
  )
}
```

- [What's new in React 19](https://ko.react.dev/blog/2024/12/05/react-19)
